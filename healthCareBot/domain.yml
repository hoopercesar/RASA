version: "3.1"

intents:
  - greet
  - goodbye
  - affirm
  - deny
  - mood_great
  - mood_unhappy
  - bot_challenge
  - inform_rut
  - request_rut_form
  # - request_tratamiento_form
  # - request_horarios_form

entities:
  - rut
  # - tratamiento
  # - horarios

slots:
  rut:
    type: text
    influence_conversation: true
    mappings:
      - type: from_entity
        entity: rut
  nombre:
    type: text
    mappings:
      - type: custom
        action: validate_rut_form
  apellido:
    type: text
    mappings:
      - type: custom
        action: validate_rut_form
  fecha_nac:
    type: text
    mappings:
      - type: custom
        action: validate_rut_form
  # tratamiento:
  #   type: text
  #   influence_conversation: true
  #   mappings:
  #     - type: from_entity
  #       entity: tratamiento
  # horarios:
  #   type: text
  #   influence_conversation: true
  #   mappings:
  #     - type: from_entity
  #       entity: horarios

forms:
  rut_form:
    required_slots:
      - rut

  # tratamiento_form:
  #   required_slots:
  #     - tratamiento

  # horarios_form:
  #   required_slots:
  #     - horarios

responses:
  utter_greet:
    - text: "Hola, qué tal? Soy tu asistente virtual. Podría digitar su Rut (ej. 111222333-4)"
    - text: "Qué tal. Por favor, escriba su Rut (ej. 111222333-4)"
    - text: "Qué gusto! Cuál es su Rut (ej. 111222333-K)"

  utter_cheer_up:
    - text: "Quiéres contarme cuáles son tus síntomas"

  utter_did_that_help:
    - text: "Ha sido de ayuda?"

  utter_happy:
    - text: "Bien... excelente"

  utter_goodbye:
    - text: "Hasta la próxima, {nombre} {apellido}. {fecha_nac}"
    - text: "Mantente en contacto. Chao, {nombre} {apellido}. {fecha_nac}"
    - text: "Estaré aquí para lo que necesites, {nombre} {apellido}. Hasta pronto. {fecha_nac}"

  utter_iamabot:
    - text: "Soy una asistente virtual. Estoy aquí para ayudar en tu tratamiento"

  utter_submit:
    - text: "Gracias. Estoy procesando su informacióm..."
    - text: "Información recibida. Aguarde unos instantes..."

  utter_rut_slots:
    - text: "{nombre}, si quieres revisar tus medicinas, digita tratamiento. Si quieres revisar los horarios digita horario"

session_config:
  session_expiration_time: 60
  carry_over_slots_to_new_session: true

actions:
  - validate_rut_form
